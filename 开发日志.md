# 2月22日

- [x] 将术语矩阵改为完整的矩形 0222矩阵.xlsx
- [x] 随机生成症状打分文件
- [ ] 训练模型
  - [ ] 先得到一个模型model_50.pkl→还在训练中，一局大概需要5-10分钟
  - [ ] 然后考虑把规则优化后，再接着训练
    - [x] 能否让一个对局早点结束？→考虑黑、白每个在每一列落子一次，然后分数高的获胜
    - [x] →不合适，同一列可能有多个落子
    - [x] →具体到每一列，有的可以取多值，有的只能取单值，有的存在互斥的值，等等，会与具体的术语矩阵相对应，由于目前矩阵是测试用的，所以也无法添加更具体的规则
    - [x] 症状打分表足够科学，才可以训练出较好的模型
    - [ ] →目前症状打分表是随机生成的，导致训练出的模型参考价值不大

# 2月23日

- [x] 解决方案：在目前的算法上做增添。计算奖励和惩罚的思路不变，还是按照症状打分表来进行。在此基础上对落子的位置做进一步限制，同色的落子一列只能有一个，从而加快每局对抗的速度。



- [x] 任务1：双方中的一方如果落子是疾病，就触发规则，即把这一方的前面的所有落子与手册或者成功病例对比，一致或者全包含的，判为有效。如果与病例等不一致，就清除这些落子，双方都可以再落子。

  - [x] 实现情况：增加了规则“**一旦落子到疾病一列，就强制另一方也在疾病一列落子，然后计算双方的得分**”

  - [ ] 未实现的部分：由于没有结构化的病例供参考，来与诊疗路径做比对，所以得分的计算方法还是通过症状打分表来进行

    

- [x] 任务2：对落子规则进行优化，同一性质的只占一子

  - [x] 实现情况：增加了这条规则后，每局控制在5分钟以内，训练出model_100.pkl

  ![](images\0222术语矩阵.PNG)

  - [x] 使用model_100.pkl，输出结果

    ```python
    input:
    {"人群": "青少年人群", "症状": "三多一少"}
    
    output:
    诊断  检查项目 : 频谱分析 得分: 0.76196
    诊断  治疗技术方法 : 手术治疗 得分: 0.05761
    诊断  病因 : 进食大量糖类食物 得分: 0.01848
    诊断  治疗技术方法 : 降血糖治疗 得分: 0.00978
    诊断  人群 : 糖尿病缺血性脑卒中患者 得分: 0.00543
    诊断  检验指标 : 空腹C肽 得分: 0.00543
    诊断  人群 : 非低体重的患者 得分: 0.00543
    诊断  药物药剂 : 速效(超短效)胰岛素类似物 得分: 0.00543
    诊断  疾病 : 脑血管意外症候群 得分: 0.00543
    诊断  疾病 : 冠心病症群 得分: 0.00543
    诊断  检验指标 : 血浓度 得分: 0.00109
    诊断  检验项目 : 血生化检查 得分: 0.00109
    诊断  检查项目 : 胃排空试验 得分: 0.00109
    诊断  检查指标 : 收缩压 得分: 0.00109
    诊断  个人史 : 严重低血糖病史 得分: 0.00109
    ```

- [ ] 任务3：从word格式的病例中提取依据→预计需要解析病例的工具

# 2月27日

- [x] 只需检验落子疾病的一方是否合规
  - [x] 实现情况：已完成，加入规则“第一个子不能落在疾病一列”

- [x] 整局数子，子多者为胜，再整体加分
  - [x] 实现情况：已完成。当一条路径上所有落子有效且已在疾病一列落子后，按照症状打分表计算得分，最后加上路径的长度

- [x] 主要是判断某一方，从一个疾病到另一个疾病的所有子是否有效

  - [ ] 通过改变input来实现，如下，在输入中写入疾病信息，得到输出的节点和得分。如有需要，可只输出与“疾病”有关的诊断

    ```python
    input:
    {"人群": "青少年人群", "疾病": "2型糖尿病"}
    
    output：
    诊断 疾病 : 脑血管意外症候群 得分: 0.37106
    诊断 检查项目 : 频谱分析 得分: 0.27748
    诊断 病因 : 进食大量糖类食物 得分: 0.0642
    诊断 治疗技术方法 : 手术治疗 得分: 0.04679
    诊断 病程时间 : 疾病初期 得分: 0.02067
    诊断 个人史 : 饮食史 得分: 0.01415
    诊断 症状 : 髓部屈肌 得分: 0.01415
    诊断 治疗技术方法 : 降血糖治疗 得分: 0.00979
    诊断 检验指标 : 空腹C肽 得分: 0.00979
    诊断 人群 : 非低体重的患者 得分: 0.00544
    诊断 药物药剂 : 速效(超短效)胰岛素类似物 得分: 0.00544
    诊断 人群 : 糖尿病缺血性脑卒中患者 得分: 0.00544
    诊断 预后 : 进食很少 得分: 0.00544
    诊断 疾病 : 冠心病症群 得分: 0.00544
    诊断 检查项目 : 胃排空试验 得分: 0.00544
    ```

    